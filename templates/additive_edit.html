{% extends "base.html" %}
{% block content %}
<h2>{% if additive %}Edit{% else %}New{% endif %} Additive</h2>
<form method="post" action="/additives/save" class="card p-4" style="max-width:500px">
  {% if additive %}<input type="hidden" name="additive_id" value="{{ additive.id }}">{% endif %}
  <div class="mb-3"><label>Name</label><input name="name" class="form-control" value="{{ additive.name if additive else '' }}" required></div>
  <div class="mb-3"><label>Affects Parameter</label>
    <select name="parameter" class="form-select">
      {% for p in parameters %}<option {% if additive and additive.parameter == p.name %}selected{% endif %}>{{ p.name }}</option>{% endfor %}
    </select>
  </div>
  <div class="mb-3"><label>Strength (e.g. raises by 1 unit)</label><input type="number" step="any" name="strength" class="form-control" value="{{ additive.strength if additive else '' }}"></div>
  <div class="mb-3"><label>Unit (e.g. ppm/L)</label><input name="unit" class="form-control" value="{{ additive.unit if additive else '' }}"></div>
  <button class="btn btn-success">Save</button>
  {% if additive %}
  <button type="submit" formaction="/additives/{{ additive.id }}/delete" class="btn btn-danger float-end" onclick="return confirm('Delete?');">Delete</button>
  {% endif %}
</form>
{% endblock %}
